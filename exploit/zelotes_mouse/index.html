<script type="text/javascript" src="parsehid.js"></script>
<script type="text/javascript" src="factory_reset.js"></script>
<script type="text/javascript" src="zelotes_t90.js"></script>
<script type="text/javascript">

function parseScript() {
    document.getElementById("err").innerHTML = "";
    var parsed = HIDSequenceParser.parse(document.getElementById("keys").value);
    if(parsed.errors.length != 0) {
        for(let e of parsed.errors) {
            document.getElementById("err").innerHTML += "Error parsing line #" + e.line + ": Unknown token" + (e.tokens.length == 1 ? "" : "s") + " " + e.tokens.join(", ") + "<br/>";
        }
    }
    return parsed.keys;
}


async function startExploit() {
    document.getElementById("err").innerHTML = "Starting...";
    var key = document.getElementById("key").value;
    keys = parseScript();
    await writeMacro(key, keys);
    document.getElementById("err").innerHTML += "<b>Done!</b>";
}
</script>
<body>
<!--Key: <input type="number" id="key" value="1"><br/>
<textarea id="keys" cols="70" rows="15"># exploit must be in clipboard (e.g. "cmd /c calc.exe")
# one key per line 
WIN
STRG V
ENTER
</textarea>
<br />
<div id="err"></div>
<button onclick="startExploit()">Let's go</button>-->


<button onclick="writeMacro(0, 0x21);">Left click</button>
<button onclick="writeMacro(0, 0x23);">Right click</button>
<button onclick="writeMacro(0, 0x2d);">Macro</button>

<br /><hr /><br />
<textarea id='hili'></textarea>
<button onclick="highlightPackets();">Hightlight</button>
<button onclick="writeRaw();">Write raw</button>

<br /><hr /><br />
<button onclick="factoryReset();">Factory Reset</button>


<pre id="log"></pre>

</body>
